{
 "add_total_row": 1,
 "columns": [],
 "creation": "2019-07-20 17:18:46.537267",
 "disable_prepared_report": 0,
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [],
 "idx": 0,
 "is_standard": "Yes",
 "modified": "2025-01-07 15:50:24.386277",
 "modified_by": "Administrator",
 "module": "Clinic",
 "name": "Clinic Sales Analytics",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "SELECT \r\nSI.name As \"InvoiceNo:Link/Sales Invoice:80\",\r\nSI.posting_date As \"InvoiceDate:Date:80\",\r\nSI.customer as \"CustomerNO:Link/Customer:80\",\r\nSI.customer_name as \"CustomerName:Data:120\",\r\nPA.doctor_name as \"Doctor:Data:100\",\r\nSI.appointment as \"Appointment/ClientPackage:Data:150\",\r\nSI.total as \"Invoice Amount:Currency:120\",\r\nSI.total_taxes_and_charges as \"Taxes\",\r\nSI.discount_amount as \"Discount Amount:Currency:120\",\r\n\r\n\r\n       (CASE \r\n            WHEN SI.use_qitaf = TRUE THEN SI.paid_amount+SI.discount_amount\r\n                \r\n            ELSE \r\n                (CASE \r\n                     WHEN SI.use_qitaf = FALSE THEN SI.paid_amount\r\n                    \r\n                END)\r\n        END) AS \"Paid Amount:Currency:120\",\r\n      \r\n      \r\n(SI.total+SI.total_taxes_and_charges-SI.discount_amount-SI.paid_amount-SI.outstanding_amount) AS \"Schedule Payment:Currency:120\",\r\nSI.outstanding_amount \"Outstanding Amount:Currency:150\"\r\nfrom  `tabSales Invoice` as SI \r\ninner JOIN `tabClient Appointment CT` PA \r\non PA.NAME = SI.appointment or PA.NAME = CONCAT('C',SI.appointment)\r\nWHERE SI.docstatus = 1\r\nand SI.posting_date >= %(from_date)s \r\nand SI.posting_date <= %(to_date)s \r\nand ( SI.doctor = %(physician)s or %(physician)s = 'all' or PA.physician = %(physician)s )\r\nUNION ALL\r\nSELECT \r\nSI.name As InvoiceNo,\r\nSI.posting_date As InvoiceDate,\r\nSI.customer as CustomerNO,\r\nSI.customer_name as CustomerName,\r\nCP.doctor_name as Doctor,\r\nSI.client_package_schedule,\r\nSI.rounded_total,\r\nSI.total_taxes_and_charges as \"Taxes\",\r\nSI.total,\r\n\r\n\r\n       (CASE \r\n            WHEN SI.use_qitaf = TRUE THEN SI.paid_amount+SI.discount_amount\r\n                \r\n            ELSE \r\n                (CASE \r\n                     WHEN SI.use_qitaf = FALSE THEN SI.paid_amount\r\n                    \r\n                END)\r\n        END) AS \"Paid Amount:Currency:120\",\r\n\r\n\r\n(SI.total+SI.total_taxes_and_charges-SI.discount_amount-SI.paid_amount-SI.outstanding_amount) AS \"Schedule Payment:Currency:120\",\r\n\r\nSI.outstanding_amount\r\nfrom  `tabSales Invoice` as SI \r\ninner JOIN `tabClient Package Schedule` CP \r\non CP.NAME = SI.client_package_schedule\r\nWHERE SI.docstatus = 1\r\nand SI.posting_date >= %(from_date)s \r\nand SI.posting_date <= %(to_date)s \r\nand ( SI.doctor = %(physician)s or %(physician)s = 'all' )",
 "ref_doctype": "Sales Invoice",
 "report_name": "Clinic Sales Analytics",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "Accounts Manager"
  },
  {
   "role": "Accounts User"
  },
  {
   "role": "System Manager"
  },
  {
   "role": "Doctor"
  },
  {
   "role": "\u0637\u0628\u064a\u0628"
  }
 ]
}